<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="de">
<head>
<title>Business Informatics Group Quiz</title>
<link rel="stylesheet" type="text/css" href="styles/screen.css" />
</head>
<body onload="createValidations()">


<header>	
	<div id="logo">
		<img src="img/big-logo-small.png" alt="Business Informatics Group Logo">
		<span>Quiz</span>
	</div>
	<nav>
		<a href="">
			<div class="navbutton">
				Anmelden
			</div>
		</a>
	</nav>
</header>

<section id="registerContent">

	<h1>Pers&ouml;nliche Daten</h1>

	<form action="" method="post">
		<label>
			<span>Vorname:</span>
			<input type="text" name="vorname">
		</label>
		<label>
			<span>Nachname:</span>
			<input type="text" name="nachname">
		</label>
		<label>
			<span>Geburtstag:</span>
			<input id="geburtstag" name="geburtstag"> 
		</label>
		<label>
			<span>Geschlecht:</span> 
			<select name="geschlecht">
				<option value="maennlich">M&auml;nnlich</option>
				<option value="weiblich">Weiblich</option>
			</select>
		</label>

		<h1>Login Daten</h1>

		<label>
			<span>Benutzername*:</span>
			<input type="text" id="benutzername" name="benutzername" value="">
		</label>
		<label>
			<span>Passwort*:</span>
			<input type="password" id="passwort" name="passwort">
		</label>

		<div id="submit">
			<input type="submit" id="submitButton" value="Registrieren" disabled>
		</div>
	</form>
	
	<div id="pflichtfelder">
		<span>
			Mit "*" gekennzeichnete Felder sind Pflichtfelder	
		</span>
	</div>

</section>

<script src="js/jquery.js"></script>
<script src="js/framework.js"></script>
<script>

function createValidations() { 

	if(hasFormValidation()) {
		// set required pattern of User, Password in form:		

		document.getElementById('benutzername').setAttribute("required", "true");
		document.getElementById('benutzername').setAttribute("pattern", "[a-zA-Z0-9]{4,8}");
		document.getElementById('benutzername').setAttribute("onkeyup", "validateByForm()");
		document.getElementById('passwort').setAttribute("required", "true");
		document.getElementById('passwort').setAttribute("pattern", "[a-zA-Z0-9]{4,8}");
		document.getElementById('passwort').setAttribute("onkeyup", "validateByForm()");
		document.getElementById('geburtstag').setAttribute("required", "true");

		if(hasNativeDateInput()) {
			// if native Date possible, set form:
		
			document.getElementById('geburtstag').setAttribute("type", "date");
			document.getElementById('geburtstag').setAttribute("onchange", "validateByForm()");
			
		} else {
			// if native Date not possible, set required pattern of date in regex in form:

			document.getElementById('geburtstag').setAttribute("type", "text");
			document.getElementById('geburtstag').setAttribute("pattern", "(?:(?:31(\\/|-|\\.)(?:0?[13578]|1[02]))\\1|(?:(?:29|30)(\\/|-|\\.)(?:0?[1,3-9]|1[0-2])\\2))(?:(?:1[6-9]|[2-9]\\d)?\\d{2})$|^(?:29(\\/|-|\\.)0?2\\3(?:(?:(?:1[6-9]|[2-9]\\d)?(?:0[48]|[2468][048]|[13579][26])|(?:(?:16|[2468][048]|[3579][26])00))))$|^(?:0?[1-9]|1\\d|2[0-8])(\\/|-|\\.)(?:(?:0?[1-9])|(?:1[0-2]))\\4(?:(?:1[6-9]|[2-9]\\d)?\\d{2})");
			document.getElementById('geburtstag').setAttribute("title", "Geburtsdatum bitte im Format TT.MM.JJJJ eingeben");
			document.getElementById('geburtstag').setAttribute("onkeyup", "validateByForm()");
		}
	} else {
		// Check Validity of User, Password and Date by JavaScript:

		document.getElementById('geburtstag').setAttribute("onkeyup", "validateByJS()");
		document.getElementById('geburtstag').setAttribute("title", "Geburtsdatum bitte im Format TT.MM.JJJJ eingeben");
		document.getElementById('benutzername').setAttribute("onkeyup", "validateByJS()");
		document.getElementById('passwort').setAttribute("onkeyup", "validateByJS()");	
	}
}

function validateByForm() {
	// Check Validity by form:

	if(document.getElementById('geburtstag').checkValidity()
	&& document.getElementById('benutzername').checkValidity()
	&& document.getElementById('passwort').checkValidity()) {
		document.getElementById("submitButton").disabled = false;
	} else {
		document.getElementById("submitButton").disabled = true;
	}
}

function validateByJS() {
	// Check Validity of User, Password and Date by JavaScript:

	var datumValid = checkDate(document.getElementById("geburtstag").value);	
	var benutzerValid = checkStringLength(document.getElementById("benutzername").value);	
	var passwortValid = checkStringLength(document.getElementById("passwort").value);		
	
	if(datumValid==true && benutzerValid==true && passwortValid==true) {
		document.getElementById("submitButton").disabled = false;
	} else {
		document.getElementById("submitButton").disabled = true;
	}
}

function checkStringLength(text) {
	// Check length of User and password:

	if(text.length >= 4 && text.length <= 8) {
		return true;
	} else {
		return false;
	}
}

function checkDate(date) {
	// check date through regex:

	var matches = /^(?:(?:31(\/|-|\.)(?:0?[13578]|1[02]))\1|(?:(?:29|30)(\/|-|\.)(?:0?[1,3-9]|1[0-2])\2))(?:(?:1[6-9]|[2-9]\d)?\d{2})$|^(?:29(\/|-|\.)0?2\3(?:(?:(?:1[6-9]|[2-9]\d)?(?:0[48]|[2468][048]|[13579][26])|(?:(?:16|[2468][048]|[3579][26])00))))$|^(?:0?[1-9]|1\d|2[0-8])(\/|-|\.)(?:(?:0?[1-9])|(?:1[0-2]))\4(?:(?:1[6-9]|[2-9]\d)?\d{2})$/.exec(date);
	if (matches != null) {
		return true;
	} else {
		return false;
	}
}

</script>

<footer><span>&#169;2014 BIG Quiz</span></footer>

</body>
</html>
